<!DOCTYPE html>
<html lang="vi">

<head>
	<meta charset="UTF-8">
	<title>Quản lý khoản chi</title>
	<link rel="stylesheet" href="/home/home.css">
	<link rel="stylesheet" href="/expense/expense.css">
</head>

<body>
	<!-- ========== HEADER ========== -->
	<header class="header">
		<div class="title">HỆ THỐNG QUẢN LÝ CHI TIÊU THÔNG MINH</div>

		<div class="user-box" id="userBox">
			<!-- NÚT CHUÔNG -->
			<div class="notify-icon" onclick="toggleNotify()">
				🔔
				<span class="notify-badge">10+</span>
			</div>

			<img data-href="/page/profile" src="/home/hinhNenMacDinh.png" />
			<span class="username">main ca</span>
			<button class="btn btn-logout" onclick="logout()">Đăng xuất</button>
		</div>

		<!--		<div class="user-box" id="guestBox">-->
		<div class="user-box" id="guestBox">
			<button class="btn btn-login" onclick="openLogin()">Đăng nhập</button>
			<button class="btn btn-signup" onclick="openRegister()">Đăng ký</button>
		</div>
		<!--		</div>-->
	</header>

	<!-- MENU CHUÔNG -->
	<div class="notify-menu" id="notifyMenu">
		<div>🔸 Chi tiêu hôm nay đã vượt 20%</div>
		<div>🔸 Bạn có khoản chi chưa ghi chú</div>
		<div>🔸 Ngân sách tháng còn 35%</div>
		<div>🔸 Ngân sách tháng còn 35%</div>
		<div>🔸 Ngân sách tháng còn 35%</div>
		<div>🔸 Ngân sách tháng còn 35%</div>
		<div>🔸 Ngân sách tháng còn 35%</div>
		<div>🔸 Ngân sách tháng còn 35%</div>
	</div>

	<!-- ========== MENU BAR ========== -->
	<nav class="menu-bar">
		<button class="tab-btn" id="tabHome" data-href="/page/home">Trang chủ</button>

		<div class="dropdown">
			<button class="tab-btn" id="tabFunc" onclick="toggleMenu()">Chức năng ▾</button>

			<div class="dropdown-menu" id="dropdownMenu">
				<div data-href="/page/category">Quản lý danh mục</div>
				<div data-href="/page/expense">Quản lý khoản chi</div>
				<div data-href="/page/budget">Quản lý ngân sách</div>
			</div>
		</div>
	</nav>

	<!-- ========== MAIN CONTENT ========== -->
	<div class="container">
		<div class="page-head">
			<h2>Quản lý khoản chi</h2>
			<button class="btn btn-primary" onclick="openForm()">+ Thêm khoản chi</button>
		</div>

		<table class="data-table">
			<thead>
				<tr>
					<th>Danh mục</th>
					<th>Số tiền</th>
					<th>Ghi chú</th>
					<th>Ngày chi</th>
					<th class="col-action"></th>
				</tr>
			</thead>
			<tbody id="expenseTable"></tbody>
		</table>
	</div>

	<!-- ========== MODAL ========== -->
	<div class="modal" id="expenseModal">
		<div class="modal-box">
			<h3 id="modalTitle">Thêm khoản chi</h3>

			<label>Danh mục</label>
			<select id="categoryId">
				<option value="">-- Chọn danh mục --</option>
			</select>
			<label>Số tiền</label>
			<input type="number" id="amount" placeholder="VD: 100000">

			<label>Ghi chú</label>
			<textarea id="note" placeholder="Ghi chú thêm (nếu có)"></textarea>

			<label>Ngày chi</label>
			<input type="datetime-local" id="spentAt">

			<div class="modal-actions">
				<button class="btn btn-primary" onclick="saveExpense()">Lưu</button>
				<button class="btn btn-logout" onclick="closeForm()">Hủy</button>
			</div>
		</div>
	</div>

	<div class="auth-overlay" id="authOverlay">
		<div class="auth-modal" id="loginModal"></div>
	</div>

	<script src="/config/header.js"></script>
	<script src="/expense/expense.js"></script>
</body>

</html>